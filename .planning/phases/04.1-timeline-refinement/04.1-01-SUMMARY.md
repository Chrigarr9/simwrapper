---
phase: 04.1-timeline-refinement
plan: 01
subsystem: ui
tags: [plotly, vue, timeline, zoom, interaction]

# Dependency graph
requires:
  - phase: 04-timeline
    provides: Basic TimelineCard with zoom buttons and minimap
provides:
  - Cursor-centered mouse wheel zoom on timeline chart
  - Consolidated zoom controls in minimap area (top-right floating overlay)
affects: [04.1-02-modal-detail]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Mouse wheel zoom using Plotly's p2d() pixel-to-data conversion"
    - "Cursor-centered zoom preserving mouse position during zoom operations"

key-files:
  created: []
  modified:
    - src/plugins/interactive-dashboard/components/cards/TimelineCard.vue

key-decisions:
  - "Use Plotly's xaxis.p2d() method to convert mouse pixel position to time coordinate for cursor-centered zoom"
  - "Prevent default wheel behavior with { passive: false } to stop page scroll during timeline zoom"
  - "Position zoom buttons as floating overlay (z-index 5) in minimap area instead of separate controls section"

patterns-established:
  - "Wheel event handler pattern: preventDefault, get mouse position, convert to data coordinates, compute centered zoom, clamp bounds, update state, relayout"

# Metrics
duration: 3min
completed: 2026-01-22
---

# Phase 04.1-01: Mouse Wheel Zoom and Zoom Control Relocation Summary

**Cursor-centered mouse wheel zoom with Plotly p2d() conversion and consolidated zoom controls as floating minimap overlay**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-22T13:33:12Z
- **Completed:** 2026-01-22T13:36:06Z
- **Tasks:** 2
- **Files modified:** 1

## Accomplishments
- Implemented cursor-centered zoom that preserves mouse position during scroll operations
- Scroll wheel up zooms in, scroll wheel down zooms out, both centered on cursor
- Relocated zoom buttons (+/-/reset) from top controls area to minimap floating overlay
- Prevented page scroll during timeline zoom with passive:false event listener

## Task Commits

Each task was committed atomically:

1. **Task 1: Add cursor-centered mouse wheel zoom** - `b39ba360` (feat)
2. **Task 2: Relocate zoom buttons to minimap area** - `13b3b37c` (feat)

## Files Created/Modified
- `src/plugins/interactive-dashboard/components/cards/TimelineCard.vue` - Added handleWheel function for cursor-centered zoom, moved zoom buttons to minimap-controls overlay, bound wheel listener in onMounted/onUnmounted

## Decisions Made

**Use Plotly's xaxis.p2d() for pixel-to-data conversion:**
- Rationale: Plotly's internal p2d (pixel-to-data) method accurately converts mouse screen position to time coordinates, accounting for axis scaling and margins. This enables true cursor-centered zoom where the time value under the cursor stays fixed during zoom operations.

**Prevent page scroll with passive:false:**
- Rationale: Default wheel events allow page scroll, which competes with timeline zoom. Setting { passive: false } enables preventDefault() to stop page scroll during timeline interaction.

**Floating overlay for zoom controls in minimap:**
- Rationale: Consolidates all zoom controls (buttons + minimap viewport indicator) in one visual area. Floating overlay (z-index 5) keeps buttons accessible without blocking minimap interaction.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

Timeline zoom functionality complete and UX improved:
- Wheel zoom provides intuitive interaction matching user mental model (zoom to what I'm pointing at)
- Zoom controls consolidated in minimap reduce visual clutter in main card area
- Ready for plan 04.1-02 (modal detail view) which will remove inline expanded detail panel

No blockers for next plan.

---
*Phase: 04.1-timeline-refinement*
*Completed: 2026-01-22*
