---
phase: 04.1-timeline-refinement
plan: 02
subsystem: ui
tags: [plotly, vue, timeline, single-select, view-switching]

# Dependency graph
requires:
  - phase: 04.1-01-zoom-controls
    provides: Mouse wheel zoom and minimap controls
  - phase: 04-timeline
    provides: Basic TimelineCard with track allocation and ride visualization
provides:
  - Single-select behavior replacing multi-select
  - View mode switching between all-rides and request detail view
  - Request timeline visualization with dynamic time scaling
affects: [04.1-03-degree-filter]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "View mode state pattern with conditional rendering based on viewMode ref"
    - "Single-select pattern that switches to detail view instead of accumulating selections"
    - "Dynamic time axis scaling based on ride constraint window for request view"

key-files:
  created: []
  modified:
    - src/plugins/interactive-dashboard/components/cards/TimelineCard.vue

key-decisions:
  - "Single-select immediately switches to request detail view instead of accumulating selection set"
  - "Request detail view is view-only (no hover/click events emit cross-card coordination)"
  - "Dynamic x-axis range scales to ride's constraint window for request view context"
  - "Back button returns to rides view and clears selection state"

patterns-established:
  - "View mode switching pattern: viewMode ref ('rides' | 'requests') determines rendering branch in renderChart()"
  - "Conditional event emission: hover/click handlers check viewMode before emitting coordination events"

# Metrics
duration: 3min
completed: 2026-01-22
---

# Phase 04.1-02: Single-Select and Request Detail View Summary

**Single-select timeline interaction that switches to request detail view with dynamic time scaling and back button navigation**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-22T13:40:43Z
- **Completed:** 2026-01-22T13:43:57Z
- **Tasks:** 2
- **Files modified:** 1

## Accomplishments
- Replaced multi-select toggle behavior with single-select that immediately switches to request detail view
- Implemented view mode state management (rides vs requests) with conditional rendering
- Created requestTimelineData computed for transforming request rows into timeline items
- Dynamic x-axis scaling for request view based on ride's constraint window
- Back button navigation to return to all-rides view
- Removed inline expandable detail panel and slide-down transition styles

## Task Commits

Each task was committed atomically:

1. **Task 1: Refactor to single-select and add view mode state** - `d3eda5ab` (feat)
2. **Task 2: Implement request detail view rendering** - `191b2d18` (feat)

## Files Created/Modified
- `src/plugins/interactive-dashboard/components/cards/TimelineCard.vue` - Added viewMode and detailRideId refs, replaced multi-select with single-select, implemented view switching, added requestTimelineData computed, updated renderChart() to branch on viewMode, added back button UI, removed expanded detail panel

## Decisions Made

**Single-select immediately switches view:**
- Rationale: Simpler UX than multi-select with separate "view details" action. Clicking a ride both selects it and shows its requests. Removes cognitive load of "select then view" workflow.

**Request detail view is view-only:**
- Rationale: No hover/click events emit in request view to prevent confusing cross-card interactions. Request view is for inspection, not filtering. User must return to rides view to change selection.

**Dynamic x-axis for request view:**
- Rationale: Request time windows are typically narrow (minutes/hours) within ride's constraint window. Scaling axis to ride window provides meaningful context instead of showing entire 24-hour range with tiny bars.

**Back button clears all selection state:**
- Rationale: Returning to rides view should reset to unfiltered state for clean slate. User can immediately select a different ride without seeing stale selection highlighting.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

Timeline UX significantly simplified:
- Multi-select removed reduces interaction complexity
- View switching provides focused inspection of individual rides
- Request detail view with contextual time scaling enables per-ride analysis
- Ready for plan 04.1-03 (degree filter) which will add filtering controls

No blockers for next plan.

---
*Phase: 04.1-timeline-refinement*
*Completed: 2026-01-22*
